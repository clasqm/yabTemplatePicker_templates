sub GetFilename$()
		local isagraphic
		while(isagraphic =0 or TheFile$ = "")
			TheFile$ = filepanel "Load-File", "Image to load?", "/boot/home"
			if TheFile$ = "" CloseWindow()
			system("mimeset -F '" + TheFile$ + "'")
			isagraphic = instr(system$("catattr -d BEOS:TYPE '"+ TheFile$ + "'"), "image/")
			if TheFile$ <> "" and isagraphic = 0 alert TheFile$ + " does not look like an image file! Try again.", "Ok", "warning"
		wend
end sub

